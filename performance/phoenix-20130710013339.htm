<html><title>Phoenix SNAPSHOT Performance</title><head><style type="text/css">table.myTable { border-collapse:collapse; } table.myTable tr { padding:5px;} table.myTable td, table.myTable th { font-size:9px; } </style></head><body style="font-family:verdana;"><font size=5 color='#448899'>Phoenix Performance Result :: Wed Jul 10 13:33:39 PDT 2013</font><br><hr><font size=3 color='#335566'><b><i>AGGREGATION_TEST_TABLE</i></b></font><font size=1><br><font color=gray><i>Various server side grouped/un-grouped aggregation functions. Data is pre-split in 9 regions over a 4 region server cluster.</i></font><br><br><b>ROWS</b> 10000000 [10M]<br><br><b>DDL</b> CREATE TABLE $TABLE (HOST CHAR(2) NOT NULL,DOMAIN VARCHAR NOT NULL,FEATURE VARCHAR NOT NULL,DATE DATE NOT NULL,USAGE.CORE BIGINT,USAGE.DB BIGINT,STATS.ACTIVE_VISITOR INTEGER CONSTRAINT PK PRIMARY KEY (HOST, DOMAIN, FEATURE, DATE)) SPLIT ON ('CSGoogle','CSSalesforce','EUApple','EUGoogle','EUSalesforce','NAApple','NAGoogle','NASalesforce')<br><br><b>DATA GENERATOR</b><br>STRING ::  Values: NA|CS|EU<br>STRING ::  Values: Salesforce.com|Apple.com|Google.com|Yelp.com<br>STRING ::  Values: Login|Report|Dashboard|Sales|UI<br>DATE ::  Values: SEQUENTIAL <br>INTEGER ::  Max. Value: 100 Values: RANDOM <br>INTEGER ::  Max. Value: 2000 Values: RANDOM <br>INTEGER ::  Max. Value: 10000 Values: RANDOM <br><br><b>QUERIES</b><br></font><table class="myTable"<tr><td><font size=1 color='black'>select count(*) from AGGREGATION_TEST_TABLE<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='71' height='10'</td><td><font size=1 color='black'>7.19s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(1) from AGGREGATION_TEST_TABLE group by HOST<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='73' height='10'</td><td><font size=1 color='black'>7.3s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select MIN(CORE) from AGGREGATION_TEST_TABLE group by DOMAIN<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='83' height='10'</td><td><font size=1 color='black'>8.31s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select core, count(1) from AGGREGATION_TEST_TABLE group by CORE<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='81' height='10'</td><td><font size=1 color='black'>8.12s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select core, host, sum(ACTIVE_VISITOR) from AGGREGATION_TEST_TABLE group by core, host<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='129' height='10'</td><td><font size=1 color='black'>12.96s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select AVG(DB), MIN(CORE), MAX(ACTIVE_VISITOR) from AGGREGATION_TEST_TABLE where host='CS' and DOMAIN<>'Google.com'<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='179' height='10'</td><td><font size=1 color='black'>17.97s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select round(date, 'day',50), sum(core)+2 from AGGREGATION_TEST_TABLE where (CORE<10 or CORE>90) group by round(date, 'day',50), host<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='56' height='10'</td><td><font size=1 color='black'>5.68s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select trunc(date, 'hour', 1000), count(DB), count(ACTIVE_VISITOR) from AGGREGATION_TEST_TABLE where feature='Login' and (core<50 or db<20 or active_visitor > 200) group by trunc(date, 'hour', 1000)<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='77' height='10'</td><td><font size=1 color='black'>7.78s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(active_visitor) count from AGGREGATION_TEST_TABLE<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='118' height='10'</td><td><font size=1 color='black'>11.8s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(distinct active_visitor) count from AGGREGATION_TEST_TABLE<table width='1000' cellspacing='0px'><tr><td><font size=1 color='gray'>N/A for PHOENIX-1.2.0</font></td></tr></table><br></td></tr><tr><td><font size=1 color='black'>select percentile_cont(0.9) within group (order by active_visitor asc) from AGGREGATION_TEST_TABLE<table width='1000' cellspacing='0px'><tr><td><font size=1 color='gray'>N/A for PHOENIX-1.2.0</font></td></tr></table><br></td></tr><tr><td><font size=1 color='black'>select percentile_cont(0.1) within group (order by active_visitor desc) from AGGREGATION_TEST_TABLE<table width='1000' cellspacing='0px'><tr><td><font size=1 color='gray'>N/A for PHOENIX-1.2.0</font></td></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(core), count(db), count(active_visitor) from AGGREGATION_TEST_TABLE<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='162' height='10'</td><td><font size=1 color='black'>16.21s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(distinct core), count(distinct db), count(distinct active_visitor) from AGGREGATION_TEST_TABLE<table width='1000' cellspacing='0px'><tr><td><font size=1 color='gray'>N/A for PHOENIX-1.2.0</font></td></tr></table><br></td></tr><tr><td><font size=1 color='black'>select percentile_cont(0.5) within group (order by core asc), percentile_cont(0.5) within group (order by db asc), percentile_cont(0.5) within group (order by active_visitor asc) from AGGREGATION_TEST_TABLE<table width='1000' cellspacing='0px'><tr><td><font size=1 color='gray'>N/A for PHOENIX-1.2.0</font></td></tr></table><br></td></tr><tr><td><font size=1 color='black'>select core, count(db) count from AGGREGATION_TEST_TABLE group by CORE<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='121' height='10'</td><td><font size=1 color='black'>12.13s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select core, count(distinct db) count from AGGREGATION_TEST_TABLE group by CORE<table width='1000' cellspacing='0px'><tr><td><font size=1 color='gray'>N/A for PHOENIX-1.2.0</font></td></tr></table><br></td></tr><tr><td><font size=1 color='black'>select core, percentile_cont(0.9999) within group (order by db asc) from AGGREGATION_TEST_TABLE group by CORE<table width='1000' cellspacing='0px'><tr><td><font size=1 color='gray'>N/A for PHOENIX-1.2.0</font></td></tr></table><br></td></tr><tr><td><font size=1 color='black'>LOAD DATA [10000000 ROWS]<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='344' height='10'</td><td><font size=1 color='black'>344.13s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr></table><hr><font size=3 color='#335566'><b><i>IN_LIKE_TABLE</i></b></font><font size=1><br><font color=gray><i>Phoenix 1.2+ uses skip scan that gives significant performance improvement for IN/LIKE queries.</i></font><br><br><b>ROWS</b> 10000000 [10M]<br><br><b>DDL</b> CREATE TABLE IF NOT EXISTS $TABLE (K1 CHAR(1) NOT NULL, K2 VARCHAR NOT NULL, CF.A INTEGER, CF.B VARCHAR, CF.C VARCHAR CONSTRAINT PK PRIMARY KEY (K1,K2)) SPLIT ON ('B','C','D','E','F','G','H','I')<br><br><b>DATA GENERATOR</b><br>STRING ::  Values: A|B|C|D|E|F|G|H|I<br>STRING ::  Length: 10 Values: SEQUENTIAL <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>STRING ::  Length: 50 Values: RANDOM <br>STRING ::  Length: 50 Values: RANDOM <br><br><b>QUERIES</b><br></font><table class="myTable"<tr><td><font size=1 color='black'>select count(1) from IN_LIKE_TABLE where K1 in ('Z', 'D', 'F', 'X')<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='36' height='10'</td><td><font size=1 color='black'>3.68s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select * from IN_LIKE_TABLE where K1 in ('A','B') and K2 in ('xxx1000000','xxx2000000','xxx2000001')<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='0' height='10'</td><td><font size=1 color='black'>0.01s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select * from IN_LIKE_TABLE where K1 in ('A', 'C', 'E', 'F', 'H') and K2 like 'xxxxxx1%'<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='0' height='10'</td><td><font size=1 color='black'>0.04s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(*) from IN_LIKE_TABLE where K1 in ('X','A','B','C','D','E','F','G','H','I','Z') and K2 like '%1%'<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='52' height='10'</td><td><font size=1 color='black'>5.27s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(*) from IN_LIKE_TABLE where (K1 in ('A','E','F','G','H','I','Z') or K1 like 'E%') and (K2 like '%xx1%' or K2 like '%xxxxxx2%')<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='53' height='10'</td><td><font size=1 color='black'>5.35s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>LOAD DATA [10000000 ROWS]<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='313' height='10'</td><td><font size=1 color='black'>313.09s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr></table><hr><font size=3 color='#335566'><b><i>CF_TABLE_14CF</i></b></font><font size=1><br><font color=gray><i>Data is split in 14 column families. Phoenix 1.2+ uses Essential Column Family filter feature which fetches only required columns when filtering rows.</i></font><br><br><b>ROWS</b> 10000000 [10M]<br><br><b>DDL</b> CREATE TABLE IF NOT EXISTS $TABLE (K1 CHAR(1) NOT NULL, K2 VARCHAR NOT NULL, CF1.A INTEGER, CF2.B INTEGER, CF3.C INTEGER, CF4.D INTEGER, CF5.E INTEGER, CF6.F INTEGER, CF7.G INTEGER, CF8.H INTEGER, CF9.I INTEGER, CF10.J INTEGER, CF11.K INTEGER, CF12.L INTEGER, CF13.M INTEGER, CF14.N INTEGER CONSTRAINT PK PRIMARY KEY (K1,K2)) SPLIT ON ('B','C','D')<br><br><b>DATA GENERATOR</b><br>STRING ::  Values: A|B|C|D<br>STRING ::  Length: 10 Values: SEQUENTIAL <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br><br><b>QUERIES</b><br></font><table class="myTable"<tr><td><font size=1 color='black'>select count(1) from CF_TABLE_14CF where K1 in ('A', 'B', 'C', 'D')<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='88' height='10'</td><td><font size=1 color='black'>8.81s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(1) from CF_TABLE_14CF where K1 in ('A', 'C')<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='88' height='10'</td><td><font size=1 color='black'>8.84s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(*) from CF_TABLE_14CF where N < 1000<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='42' height='10'</td><td><font size=1 color='black'>4.23s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select a,b,c,d,e,f,g,h,i,j,k,l,m,n from CF_TABLE_14CF where (B>1000 and B<2000) and (M>1000 and M<2000)<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='59' height='10'</td><td><font size=1 color='black'>5.95s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select sum(a),sum(e),sum(j),sum(n) from CF_TABLE_14CF group by K1<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='274' height='10'</td><td><font size=1 color='black'>27.43s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>LOAD DATA [10000000 ROWS]<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='624' height='10'</td><td><font size=1 color='black'>624.88s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr></table><hr><font size=3 color='#335566'><b><i>SALTED_TABLE</i></b></font><font size=1><br><font color=gray><i>This is Phoenix 1.2+ feature. Data is split in 4 regions equal to number of region servers in test cluster by adding salted byte to each key.</i></font><br><br><b>ROWS</b> 10000000 [10M]<br><br><b>DDL</b> CREATE TABLE $TABLE (K1 CHAR(1) NOT NULL, K2 VARCHAR NOT NULL, CFA.A VARCHAR, CFA.B CHAR(100), CFA.C INTEGER, CFB.D INTEGER CONSTRAINT PK PRIMARY KEY (K1,K2)) SALT_BUCKETS=4<br><br><b>DATA GENERATOR</b><br>STRING ::  Values: A|B|C|D<br>STRING ::  Length: 10 Values: SEQUENTIAL <br>STRING ::  Length: 100 Values: RANDOM <br>STRING ::  Length: 100 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br><br><b>QUERIES</b><br></font><table class="myTable"<tr><td><font size=1 color='black'>select count(1) from SALTED_TABLE where K1 in ('A', 'B', 'C', 'D')<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='59' height='10'</td><td><font size=1 color='black'>5.93s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(*) from SALTED_TABLE where D < 1000<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='22' height='10'</td><td><font size=1 color='black'>2.2s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select avg(c),avg(d) from SALTED_TABLE group by K1<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='127' height='10'</td><td><font size=1 color='black'>12.76s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>LOAD DATA [10000000 ROWS]<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='380' height='10'</td><td><font size=1 color='black'>380.67s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr></table><hr><font size=3 color='#335566'><b><i>CF_TABLE_1CF</i></b></font><font size=1><br><font color=gray><i>Same data as in 14 column family table but this one only has a single column family. Performance should be worse in most cases.</i></font><br><br><b>ROWS</b> 10000000 [10M]<br><br><b>DDL</b> CREATE TABLE IF NOT EXISTS $TABLE (K1 CHAR(1) NOT NULL, K2 VARCHAR NOT NULL, CF.A INTEGER, CF.B INTEGER, CF.C INTEGER, CF.D INTEGER, CF.E INTEGER, CF.F INTEGER, CF.G INTEGER, CF.H INTEGER, CF.I INTEGER, CF.J INTEGER, CF.K INTEGER, CF.L INTEGER, CF.M INTEGER, CF.N INTEGER CONSTRAINT PK PRIMARY KEY (K1,K2)) SPLIT ON ('B','C','D')<br><br><b>DATA GENERATOR</b><br>STRING ::  Values: A|B|C|D<br>STRING ::  Length: 10 Values: SEQUENTIAL <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br>INTEGER ::  Max. Value: 1000000 Values: RANDOM <br><br><b>QUERIES</b><br></font><table class="myTable"<tr><td><font size=1 color='black'>select count(1) from CF_TABLE_1CF where K1 in ('A', 'B', 'C', 'D')<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='88' height='10'</td><td><font size=1 color='black'>8.84s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(1) from CF_TABLE_1CF where K1 in ('A', 'C')<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='88' height='10'</td><td><font size=1 color='black'>8.87s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select count(*) from CF_TABLE_1CF where N < 1000<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='119' height='10'</td><td><font size=1 color='black'>11.98s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select a,b,c,d,e,f,g,h,i,j,k,l,m,n from CF_TABLE_1CF where B>1000 and B<2000 and M>1000 and M<2000<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='138' height='10'</td><td><font size=1 color='black'>13.87s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>select sum(a),sum(e),sum(j),sum(n) from CF_TABLE_1CF group by K1<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='255' height='10'</td><td><font size=1 color='black'>25.58s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr><tr><td><font size=1 color='black'>LOAD DATA [10000000 ROWS]<table width='1000' cellspacing='0px'><tr><td bgcolor='#D5E5D5' width='537' height='10'</td><td><font size=1 color='black'>537.14s</font><font size=1 color='gray'> PHOENIX-1.2.0</font></td></font></tr></table><br></td></tr></table></html>