
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-04-14
 Rendered using Reflow Maven Skin 1.1.0 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Overview | Apache Phoenix</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="//netdna.bootstrapcdn.com/bootswatch/2.3.2/flatly/bootstrap.min.css" rel="stylesheet" />
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="//yandex.st/highlightjs/7.5/styles/default.min.css" rel="stylesheet" />
		
		<link href="./css/lightbox.css" rel="stylesheet" />
		
		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-pherf project-phoenix-site" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html"><div class="xtoplogo"></div></a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="index.html" title="Overview">Overview</a></li>
									<li ><a href="recent.html" title="New Features">New Features</a></li>
									<li ><a href="roadmap.html" title="Roadmap">Roadmap</a></li>
									<li ><a href="performance.html" title="Performance">Performance</a></li>
									<li ><a href="team.html" title="Team">Team</a></li>
									<li ><a href="resources.html" title="Resources">Resources</a></li>
									<li ><a href="mailing_list.html" title="Mailing Lists">Mailing Lists</a></li>
									<li ><a href="source.html" title="Source Repository">Source Repository</a></li>
									<li ><a href="issues.html" title="Issue Tracking">Issue Tracking</a></li>
									<li ><a href="download.html" title="Download">Download</a></li>
									<li ><a href="installation.html" title="Installation">Installation</a></li>
									<li class="divider"/>
									<li ><a href="who_is_using.html" title="Who is Using">Who is Using</a></li>
									<li ><a href="contributing.html" title="How to Contribute">How to Contribute</a></li>
									<li ><a href="develop.html" title="How to Develop">How to Develop</a></li>
									<li ><a href="building_website.html" title="How to Update Website">How to Update Website</a></li>
									<li ><a href="release.html" title="How to Release">How to Release</a></li>
									<li class="divider"/>
									<li ><a href="http://www.apache.org/licenses/" title="License" class="externalLink">License</a></li>
									<li ><a href="http://www.apache.org/foundation/sponsorship.html" title="Sponsorship" class="externalLink">Sponsorship</a></li>
									<li ><a href="http://www.apache.org/foundation/thanks.html" title="Thanks" class="externalLink">Thanks</a></li>
									<li ><a href="http://www.apache.org/security/" title="Security" class="externalLink">Security</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Using <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="faq.html" title="F.A.Q.">F.A.Q.</a></li>
									<li ><a href="Phoenix-in-15-minutes-or-less.html" title="Quick Start">Quick Start</a></li>
									<li ><a href="building.html" title="Building">Building</a></li>
									<li ><a href="tuning.html" title="Tuning">Tuning</a></li>
									<li ><a href="upgrading.html" title="Upgrading">Upgrading</a></li>
									<li class="divider"/>
									<li ><a href="secondary_indexing.html" title="Secondary Indexes">Secondary Indexes</a></li>
									<li ><a href="joins.html" title="Joins">Joins</a></li>
									<li ><a href="subqueries.html" title="Subqueries">Subqueries</a></li>
									<li ><a href="views.html" title="Views">Views</a></li>
									<li ><a href="multi-tenancy.html" title="Multi tenancy">Multi tenancy</a></li>
									<li ><a href="sequences.html" title="Sequences">Sequences</a></li>
									<li ><a href="array_type.html" title="ARRAY type">ARRAY type</a></li>
									<li ><a href="salted.html" title="Salted Tables">Salted Tables</a></li>
									<li ><a href="paged.html" title="Paged Queries">Paged Queries</a></li>
									<li ><a href="dynamic_columns.html" title="Dynamic Columns">Dynamic Columns</a></li>
									<li ><a href="skip_scan.html" title="Skip Scan">Skip Scan</a></li>
									<li ><a href="bulk_dataload.html" title="Bulk Loading">Bulk Loading</a></li>
									<li ><a href="tracing.html" title="Tracing">Tracing</a></li>
									<li ><a href="update_statistics.html" title="Statistics Collection">Statistics Collection</a></li>
									<li class="active"><a href="" title="Performance Testing">Performance Testing</a></li>
									<li class="divider"/>
									<li ><a href="phoenix_on_emr.html" title="Amazon EMR Support">Amazon EMR Support</a></li>
									<li ><a href="flume.html" title="Apache Flume Plugin">Apache Flume Plugin</a></li>
									<li ><a href="pig_integration.html" title="Apache Pig Integration">Apache Pig Integration</a></li>
									<li ><a href="phoenix_mr.html" title="Map Reduce Integration">Map Reduce Integration</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="language/index.html" title="Grammar">Grammar</a></li>
									<li ><a href="language/functions.html" title="Functions">Functions</a></li>
									<li ><a href="language/datatypes.html" title="Datatypes">Datatypes</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->

	<header>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<p align="center"><br /> <img src="images/logo/pherf.png" alt="" /></p> 
<div class="section"> 
 <div class="page-header">
  <h2 id="Overview">Overview</h2>
 </div> 
 <p>Pherf is a standalone tool that can perform performance and functional testing through Phoenix. Pherf can be used both generate highly customized data sets and to measure performance of SQL against that data.</p> 
</div> 
<div class="section"> 
 <h2 id="Build">Build</h2> 
 <p>Building Pherf is done through Phoenix’s normal build Maven process. Pherf can be built using two profiles.</p> 
 <ul> 
  <li>Cluster ( <b>default</b> ) - This profile builds Pherf such that it can run along side an existing cluster. The dependencies are pulled from the HBase classpath.</li> 
  <li>Standalone - This profile builds all of Pherf’s dependencies into a single standalone jar. The deps will be pulled from the versions specified in Phoenix’s pom.</li> 
 </ul> 
 <div class="section"> 
  <h3 id="Build_all_of_Phoenix._This_includes_Pherfs_default_profile">Build all of Phoenix. This includes Pherf’s default profile</h3> 
  <p><tt>mvn clean package -DskipTests</tt></p> 
 </div> 
 <div class="section"> 
  <h3 id="Build_Phoenix_with_Pherfs_standalone_profile">Build Phoenix with Pherf’s standalone profile</h3> 
  <p><tt>mvn clean package -P standalone -DskipTests</tt></p> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Installing">Installing</h2> 
 <p>When Pherf is built using the Maven commands specified above, it will produce a <a class="externalLink" href="https://github.com/apache/phoenix/tree/master/phoenix-pherf">zip</a> file in the module’s target directory.</p> 
 <ol style="list-style-type: decimal"> 
  <li>Simply unpack this zip into the desired location.</li> 
  <li>Edit the env.sh to include the required property values.</li> 
  <li><tt>./pherf.sh -h</tt></li> 
  <li>To test on a real cluster: <tt>./pherf.sh -drop all -l -q -z localhost -schemaFile .*user_defined_schema.sql -scenarioFile .*user_defined_scenario.xml</tt></li> 
  <li>That’s it.</li> 
 </ol> 
</div> 
<div class="section"> 
 <h2 id="Example_run_commands.">Example run commands.</h2> 
 <div class="section"> 
  <h3 id="List_all_scenario_files_available_to_run.">List all scenario files available to run.</h3> 
  <p>$./pherf.sh -listFiles</p> 
 </div> 
 <div class="section"> 
  <h3 id="Drop_all_existing_tables_load_and_query_data_specified_in_all_scenario_files.">Drop all existing tables, load and query data specified in all scenario files.</h3> 
  <p>$./pherf.sh -drop all -l -q -z localhost </p> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Pherf_arguments:">Pherf arguments:</h2> 
 <ul> 
  <li>-h <i>Help</i> <br /></li> 
  <li>-l <i>Apply schema and load data</i><br /></li> 
  <li>-q <i>Executes Multi-threaded query sets and write results</i><br /></li> 
  <li>-z [quorum] <i>Zookeeper quorum</i><br /></li> 
  <li>-m <i>Enable monitor for statistics</i><br /></li> 
  <li>-monitorFrequency [frequency in Ms] _Frequency at which the monitor will snopshot stats to log file. <br /></li> 
  <li>-drop [pattern] <i>Regex drop all tables with schema name as PHERF. Example drop Event tables: -drop .<i>(EVENT).</i> Drop all: -drop .* or -drop all</i><br /></li> 
  <li>-scenarioFile <i>Regex or file name of a specific scenario file to run.</i> <br /></li> 
  <li>-schemaFile <i>Regex or file name of a specific schema file to run.</i> <br /></li> 
  <li>-export Exports query results to CSV files in CSV_EXPORT directory <br /></li> 
  <li>-diff Compares results with previously exported results <br /></li> 
  <li>-hint <i>Executes all queries with specified hint. Example SMALL</i> <br /></li> 
  <li>-rowCountOverride</li> 
  <li>-rowCountOverride [number of rows] <i>Specify number of rows to be upserted rather than using row count specified in schema</i> &lt;/ br&gt;</li> 
 </ul> 
</div> 
<div class="section"> 
 <h2 id="Adding_Rules_for_Data_Creation">Adding Rules for Data Creation</h2> 
 <p>Review <a href="/src/test/resources/scenario/test_scenario.xml">test_scenario.xml</a> for syntax examples.<br /></p> 
 <ul> 
  <li>Rules are defined as <tt>&lt;columns /&gt;</tt> and are applied in the order they appear in file.</li> 
  <li>Rules of the same type override the values of a prior rule of the same type. If <tt>&lt;userDefined&gt;true&lt;/userDefined&gt;</tt> is set, rule will only apply override when type and name match the column name in Phoenix.</li> 
  <li><tt>&lt;prefix&gt;</tt> tag is set at the column level. It can be used to define a constant string appended to the beginning of CHAR and VARCHAR data type values.</li> 
  <li><b>Required field</b> Supported Phoenix types: VARCHAR, CHAR, DATE, DECIMAL, INTEGER 
   <ul> 
    <li>denoted by the <tt>&lt;type&gt;</tt> tag</li> 
   </ul></li> 
  <li>User defined true changes rule matching to use both name and type fields to determine equivalence. 
   <ul> 
    <li>Default is false if not specified and equivalence will be determined by type only. <b>An important note here is that you can still override rules without the user defined flag, but they will change the rule globally and not just for a specified column.</b></li> 
   </ul></li> 
  <li><b>Required field</b> Supported Data Sequences 
   <ul> 
    <li>RANDOM: Random value which can be bound by other fields such as length.</li> 
    <li>SEQUENTIAL: Monotonically increasing long prepended to random strings. 
     <ul> 
      <li>Only supported on VARCHAR and CHAR types</li> 
     </ul></li> 
    <li>LIST: Means pick values from predefined list of values</li> 
   </ul></li> 
  <li><b>Required field</b> Length defines boundary for random values for CHAR and VARCHAR types. 
   <ul> 
    <li>denoted by the <tt>&lt;length&gt;</tt> tag</li> 
   </ul></li> 
  <li>Column level Min/Max value defines boundaries for numerical values. For DATES, these values supply a range between which values are generated. At the column level the granularity is a year. At a specific data value level, the granularity is down to the Ms. 
   <ul> 
    <li>denoted by the <tt>&lt;minValue&gt;</tt> tag</li> 
    <li>denoted by the <tt>&lt;maxValue&gt;</tt> tag</li> 
   </ul></li> 
  <li>Null chance denotes the probability of generating a null value. From [0-100]. The higher the number, the more likely the value will be null. 
   <ul> 
    <li>denoted by <tt>&lt;nullChance&gt;</tt></li> 
   </ul></li> 
  <li>Name can either be any text or the actual column name in the Phoenix table. 
   <ul> 
    <li>denoted by the <tt>&lt;name&gt;</tt></li> 
   </ul></li> 
  <li>Value List is used in conjunction with LIST data sequences. Each entry is a DataValue with a specified value to be used when generating data. 
   <ul> 
    <li>Denoted by the <tt>&lt;valueList&gt;&lt;datavalue&gt;&lt;value/&gt;&lt;/datavalue&gt;&lt;/valueList&gt;</tt> tags</li> 
    <li>If the distribution attribute on the datavalue is set, values will be created according to that probability.</li> 
    <li>When distribution is used, values must add up to 100%.</li> 
    <li>If distribution is not used, values will be randomly picked from the list with equal distribution.</li> 
   </ul></li> 
 </ul> 
</div> 
<div class="section"> 
 <h2 id="Defining_Scenario">Defining Scenario</h2> 
 <p>Scenario can have multiple querySets. Consider following example, concurrency of 1-4 means that each query will be executed starting with concurrency level of 1 and reach up to maximum concurrency of 4. Per thread, query would be executed to a minimum of 10 times or 10 seconds (whichever comes first). QuerySet by defult is executed serially but you can change executionType to PARALLEL so queries are executed concurrently. Scenarios are defined in XMLs stored in the resource directory.</p> 
 <div class="source"> 
  <pre>&lt;scenarios&gt;
    &lt;!--Minimum of executionDurationInMs or numberOfExecutions. Which ever is reached first --&gt;
    &lt;querySet concurrency=&quot;1-4&quot; executionType=&quot;PARALLEL&quot; executionDurationInMs=&quot;10000&quot; numberOfExecutions=&quot;10&quot;&gt;
        &lt;query id=&quot;q1&quot; verifyRowCount=&quot;false&quot; statement=&quot;select count(*) from PHERF.TEST_TABLE&quot;/&gt;
        &lt;query id=&quot;q2&quot; tenantId=&quot;1234567890&quot; ddl=&quot;create view if not exists 
        myview(mypk varchar not null primary key, mycol varchar)&quot; statement=&quot;upsert select ...&quot;/&gt;
    &lt;/querySet&gt;
    &lt;querySet concurrency=&quot;3&quot; executionType=&quot;SERIAL&quot; executionDurationInMs=&quot;20000&quot; numberOfExecutions=&quot;100&quot;&gt;
        &lt;query id=&quot;q3&quot; verifyRowCount=&quot;false&quot; statement=&quot;select count(*) from PHERF.TEST_TABLE&quot;/&gt;
        &lt;query id=&quot;q4&quot; statement=&quot;select count(*) from PHERF.TEST_TABLE WHERE TENANT_ID='00D000000000062'&quot;/&gt;
    &lt;/querySet&gt;
&lt;/scenario&gt;
        
</pre> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Results">Results</h2> 
 <p>Results are written real time in <i>results</i> directory. Open the result that is saved in .jpg format for real time visualization.</p> 
</div> 
<div class="section"> 
 <h2 id="Testing">Testing</h2> 
 <p>Default quorum is localhost. If you want to override set the system variable.</p> 
 <p>Run unit tests: <tt>mvn test -DZK_QUORUM=localhost</tt><br /> Run a specific method: <tt>mvn -Dtest=ClassName#methodName test</tt> <br /></p> 
 <p>More to come…</p> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">About</li>
						<li >
							<a href="index.html" title="Overview">Overview</a>
						</li>
						<li >
							<a href="recent.html" title="New Features">New Features</a>
						</li>
						<li >
							<a href="roadmap.html" title="Roadmap">Roadmap</a>
						</li>
						<li >
							<a href="performance.html" title="Performance">Performance</a>
						</li>
						<li >
							<a href="team.html" title="Team">Team</a>
						</li>
						<li >
							<a href="resources.html" title="Resources">Resources</a>
						</li>
						<li >
							<a href="mailing_list.html" title="Mailing Lists">Mailing Lists</a>
						</li>
						<li >
							<a href="source.html" title="Source Repository">Source Repository</a>
						</li>
						<li >
							<a href="issues.html" title="Issue Tracking">Issue Tracking</a>
						</li>
						<li >
							<a href="download.html" title="Download">Download</a>
						</li>
						<li >
							<a href="installation.html" title="Installation">Installation</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="who_is_using.html" title="Who is Using">Who is Using</a>
						</li>
						<li >
							<a href="contributing.html" title="How to Contribute">How to Contribute</a>
						</li>
						<li >
							<a href="develop.html" title="How to Develop">How to Develop</a>
						</li>
						<li >
							<a href="building_website.html" title="How to Update Website">How to Update Website</a>
						</li>
						<li >
							<a href="release.html" title="How to Release">How to Release</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="http://www.apache.org/licenses/" title="License" class="externalLink">License</a>
						</li>
						<li >
							<a href="http://www.apache.org/foundation/sponsorship.html" title="Sponsorship" class="externalLink">Sponsorship</a>
						</li>
						<li >
							<a href="http://www.apache.org/foundation/thanks.html" title="Thanks" class="externalLink">Thanks</a>
						</li>
						<li >
							<a href="http://www.apache.org/security/" title="Security" class="externalLink">Security</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Using</li>
						<li >
							<a href="faq.html" title="F.A.Q.">F.A.Q.</a>
						</li>
						<li >
							<a href="Phoenix-in-15-minutes-or-less.html" title="Quick Start">Quick Start</a>
						</li>
						<li >
							<a href="building.html" title="Building">Building</a>
						</li>
						<li >
							<a href="tuning.html" title="Tuning">Tuning</a>
						</li>
						<li >
							<a href="upgrading.html" title="Upgrading">Upgrading</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="secondary_indexing.html" title="Secondary Indexes">Secondary Indexes</a>
						</li>
						<li >
							<a href="joins.html" title="Joins">Joins</a>
						</li>
						<li >
							<a href="subqueries.html" title="Subqueries">Subqueries</a>
						</li>
						<li >
							<a href="views.html" title="Views">Views</a>
						</li>
						<li >
							<a href="multi-tenancy.html" title="Multi tenancy">Multi tenancy</a>
						</li>
						<li >
							<a href="sequences.html" title="Sequences">Sequences</a>
						</li>
						<li >
							<a href="array_type.html" title="ARRAY type">ARRAY type</a>
						</li>
						<li >
							<a href="salted.html" title="Salted Tables">Salted Tables</a>
						</li>
						<li >
							<a href="paged.html" title="Paged Queries">Paged Queries</a>
						</li>
						<li >
							<a href="dynamic_columns.html" title="Dynamic Columns">Dynamic Columns</a>
						</li>
						<li >
							<a href="skip_scan.html" title="Skip Scan">Skip Scan</a>
						</li>
						<li >
							<a href="bulk_dataload.html" title="Bulk Loading">Bulk Loading</a>
						</li>
						<li >
							<a href="tracing.html" title="Tracing">Tracing</a>
						</li>
						<li >
							<a href="update_statistics.html" title="Statistics Collection">Statistics Collection</a>
						</li>
						<li class="active">
							<a href="#" title="Performance Testing">Performance Testing</a>
						</li>
						<li >
							<a href="http:divider" title=""></a>
						</li>
						<li >
							<a href="phoenix_on_emr.html" title="Amazon EMR Support">Amazon EMR Support</a>
						</li>
						<li >
							<a href="flume.html" title="Apache Flume Plugin">Apache Flume Plugin</a>
						</li>
						<li >
							<a href="pig_integration.html" title="Apache Pig Integration">Apache Pig Integration</a>
						</li>
						<li >
							<a href="phoenix_mr.html" title="Map Reduce Integration">Map Reduce Integration</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Reference</li>
						<li >
							<a href="language/index.html" title="Grammar">Grammar</a>
						</li>
						<li >
							<a href="language/functions.html" title="Functions">Functions</a>
						</li>
						<li >
							<a href="language/datatypes.html" title="Datatypes">Datatypes</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<form action="http://search-hadoop.com/?" method="get"><input value="Phoenix" name="fc_project" type="hidden"><input placeholder="Search Phoenix&hellip;" required="required" style="width:170px;" size="18" name="q" id="query" type="search"></form>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2015 <a href="http://www.apache.org">Apache Software Foundation</a>. All Rights Reserved.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	
	<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.js"></script>
	<script src="./js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="./js/jquery.ba-bbq.min.js"></script>
	<script src="//yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>
	
	</body>
</html>
